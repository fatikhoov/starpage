console.log("modalform.js modules");const TelegramBot=require("telegram-bot-api"),successSendModal=document.getElementById("success-send-modal"),validSendModal=document.getElementById("valid-send-modal"),btnSendModal=document.getElementById("btn-send-modal"),loader=document.getElementById("loader-modal"),onSuccessModal=document.getElementById("onSuccess__modal"),btnSend=document.querySelector(".btn-send"),applicantForm=document.getElementById("modal-form"),token="5982848535:AAHG_jfr5wVA9lTRAxhSxYnuzdBT5pGB3JM",chatId="459797765",bot=new TelegramBot({token:token});bot.on("message",e=>{console.log("Received message: "+e.text)}),bot.startPolling();let s="Заявка из формы";function checkValidity(e){e=e.target.form.checkValidity();return btnSend.disabled=!e,!btnSend.disabled&&btnSendModal.classList.contains("hidden")||btnSend.disabled&&validSendModal.classList.contains("hidden")?(validSendModal.classList.toggle("hidden"),btnSendModal.classList.toggle("hidden")):void 0}function onError(e){alert(e.message)}function onSuccess(e){e.classList.toggle("hidden"),onSuccessModal.classList.toggle("hidden"),btnSendModal.classList.toggle("hidden"),successSendModal.classList.toggle("hidden"),btnSend.disabled="disabled"}function toggleLoader(){btnSendModal.classList.toggle("hidden"),loader.classList.toggle("hidden")}async function sendData(e){return bot.sendMessage(chatId,`Заявка с формы:
`+e)}function serializeForm(e){e=new FormData(e);return Array.from(e.entries()).filter(e=>{s+=`  |---|  ${e[0]}: `+e[1]}),s}async function handleFormSubmit(e){e.preventDefault();var t=serializeForm(e.target),t=(toggleLoader(),await sendData(t))["status"];toggleLoader(),200===t?onSuccess(e.target):onError(error)}applicantForm.addEventListener("input",checkValidity),applicantForm.addEventListener("submit",handleFormSubmit);